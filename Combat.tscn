[gd_scene load_steps=4 format=3 uid="uid://n50ddjgcmc5n"]

[ext_resource type="Script" path="res://Combat.cs" id="1_2aaos"]
[ext_resource type="Texture2D" uid="uid://d00cjwdif7noe" path="res://assets/GameWindows/Window9PatchRect.png" id="2_06y1k"]
[ext_resource type="ButtonGroup" uid="uid://cu8kolstgunxd" path="res://CombatSim/combatsimbuttons.tres" id="3_de76w"]

[node name="Combat" type="Node2D" node_paths=PackedStringArray("_confirmDialog", "_confirmButton", "_nextButton")]
process_mode = 2
script = ExtResource("1_2aaos")
_confirmDialog = NodePath("NinePatchRect/ConfirmationDialog")
_confirmButton = NodePath("NinePatchRect/ConfirmButton")
_nextButton = NodePath("NinePatchRect/NextButton")

[node name="NinePatchRect" type="NinePatchRect" parent="."]
show_behind_parent = true
z_index = 1
offset_right = 1404.0
offset_bottom = 798.0
mouse_filter = 1
texture = ExtResource("2_06y1k")
patch_margin_left = 30
patch_margin_top = 30
patch_margin_right = 30
patch_margin_bottom = 30

[node name="NextButton" type="Button" parent="NinePatchRect"]
layout_mode = 0
offset_left = 40.0
offset_top = 568.0
offset_right = 143.0
offset_bottom = 599.0
text = "Skip Ranged"

[node name="ConfirmButton" type="Button" parent="NinePatchRect"]
layout_mode = 0
offset_left = 40.0
offset_top = 616.0
offset_right = 165.0
offset_bottom = 647.0
disabled = true
text = "Confirm Attack"

[node name="WoundsLabel" type="Label" parent="NinePatchRect"]
layout_mode = 0
offset_left = 40.0
offset_top = 664.0
offset_right = 117.0
offset_bottom = 687.0
text = "Wounds 0"

[node name="TotalWoundsLabel" type="Label" parent="NinePatchRect"]
layout_mode = 0
offset_left = 40.0
offset_top = 704.0
offset_right = 160.0
offset_bottom = 727.0
text = "Total Wounds 0"

[node name="ConfirmationDialog" type="ConfirmationDialog" parent="NinePatchRect"]
title = ""
initial_position = 1
size = Vector2i(271, 106)
dialog_text = "Finish combat and return to map"

[node name="AttackButton" type="Button" parent="NinePatchRect"]
visible = false
layout_mode = 0
offset_left = 1160.0
offset_top = 32.0
offset_right = 1266.0
offset_bottom = 63.0
button_group = ExtResource("3_de76w")
text = "Add 1 Attack"

[node name="RangeButton" type="Button" parent="NinePatchRect"]
visible = false
layout_mode = 0
offset_left = 1040.0
offset_top = 32.0
offset_right = 1146.0
offset_bottom = 63.0
button_group = ExtResource("3_de76w")
text = "Add 1 Range"

[node name="SiegeButton" type="Button" parent="NinePatchRect"]
visible = false
layout_mode = 0
offset_left = 920.0
offset_top = 32.0
offset_right = 1026.0
offset_bottom = 63.0
button_group = ExtResource("3_de76w")
text = "Add 1 Siege"

[node name="FireAttackButton" type="Button" parent="NinePatchRect"]
visible = false
layout_mode = 0
offset_left = 1160.0
offset_top = 72.0
offset_right = 1299.0
offset_bottom = 103.0
button_group = ExtResource("3_de76w")
text = "Add 1 Fire Attack"

[node name="IceAttackButton" type="Button" parent="NinePatchRect"]
visible = false
layout_mode = 0
offset_left = 1160.0
offset_top = 112.0
offset_right = 1292.0
offset_bottom = 143.0
button_group = ExtResource("3_de76w")
text = "Add 1 Ice Attack"

[node name="IceFireAttackButton" type="Button" parent="NinePatchRect"]
visible = false
layout_mode = 0
offset_left = 1160.0
offset_top = 152.0
offset_right = 1334.0
offset_bottom = 183.0
button_group = ExtResource("3_de76w")
text = "Add 1 ColdFire Attack"

[node name="BlockButton" type="Button" parent="NinePatchRect"]
visible = false
layout_mode = 0
offset_left = 1160.0
offset_top = 192.0
offset_right = 1334.0
offset_bottom = 223.0
button_group = ExtResource("3_de76w")
text = "Add 1 Block
"

[node name="FireBlockButton" type="Button" parent="NinePatchRect"]
visible = false
layout_mode = 0
offset_left = 1160.0
offset_top = 232.0
offset_right = 1334.0
offset_bottom = 263.0
button_group = ExtResource("3_de76w")
text = "Add 1 Fire Block"

[node name="IceBlockButton" type="Button" parent="NinePatchRect"]
visible = false
layout_mode = 0
offset_left = 1160.0
offset_top = 272.0
offset_right = 1334.0
offset_bottom = 303.0
button_group = ExtResource("3_de76w")
text = "Add 1 Ice Block"

[node name="IceFireButtonButton" type="Button" parent="NinePatchRect"]
visible = false
layout_mode = 0
offset_left = 1160.0
offset_top = 312.0
offset_right = 1334.0
offset_bottom = 343.0
button_group = ExtResource("3_de76w")
text = "Add 1 ColdFire Block"

[node name="CancelAttackButton" type="Button" parent="NinePatchRect"]
visible = false
layout_mode = 0
offset_left = 1160.0
offset_top = 352.0
offset_right = 1287.0
offset_bottom = 383.0
button_group = ExtResource("3_de76w")
text = "Cancel 1 Attack"

[node name="FearBannerButton" type="Button" parent="NinePatchRect"]
visible = false
layout_mode = 0
offset_left = 1160.0
offset_top = 472.0
offset_right = 1266.0
offset_bottom = 503.0
button_group = ExtResource("3_de76w")
text = "Up to 3 No Attack"

[node name="IllusionistsButton" type="Button" parent="NinePatchRect"]
visible = false
layout_mode = 0
offset_left = 1160.0
offset_top = 392.0
offset_right = 1387.0
offset_bottom = 423.0
button_group = ExtResource("3_de76w")
text = "Target Unfortified No Attack"

[node name="TargetEnemyButton" type="Button" parent="NinePatchRect"]
visible = false
layout_mode = 0
offset_left = 1160.0
offset_top = 432.0
offset_right = 1266.0
offset_bottom = 463.0
button_group = ExtResource("3_de76w")
text = "Target Enemy No Attack"

[node name="ReduceAttackButton" type="Button" parent="NinePatchRect"]
visible = false
layout_mode = 0
offset_left = 920.0
offset_top = 192.0
offset_right = 1047.0
offset_bottom = 223.0
button_group = ExtResource("3_de76w")
text = "Reduce 1 Attack"

[node name="Reduce2AttacksButton" type="Button" parent="NinePatchRect"]
visible = false
layout_mode = 0
offset_left = 920.0
offset_top = 232.0
offset_right = 1060.0
offset_bottom = 263.0
button_group = ExtResource("3_de76w")
text = "Reduce 2 Attacks"

[node name="MovementButton" type="Button" parent="NinePatchRect"]
visible = false
layout_mode = 0
offset_left = 920.0
offset_top = 272.0
offset_right = 1060.0
offset_bottom = 303.0
button_group = ExtResource("3_de76w")
text = "Add 1 Movement"

[connection signal="pressed" from="NinePatchRect/NextButton" to="." method="OnNextButtonPressed"]
[connection signal="pressed" from="NinePatchRect/ConfirmButton" to="." method="OnConfirmButtonPressed"]
[connection signal="confirmed" from="NinePatchRect/ConfirmationDialog" to="." method="OnFinishCombatConfirmed"]
[connection signal="pressed" from="NinePatchRect/AttackButton" to="." method="AddAttack" binds= [1, 0, 0]]
[connection signal="pressed" from="NinePatchRect/RangeButton" to="." method="AddAttack" binds= [1, 0, 4]]
[connection signal="pressed" from="NinePatchRect/SiegeButton" to="." method="AddAttack" binds= [1, 0, 8]]
[connection signal="pressed" from="NinePatchRect/FireAttackButton" to="." method="AddAttack" binds= [1, 1, 0]]
[connection signal="pressed" from="NinePatchRect/IceAttackButton" to="." method="AddAttack" binds= [1, 2, 0]]
[connection signal="pressed" from="NinePatchRect/IceFireAttackButton" to="." method="AddAttack" binds= [1, 3, 0]]
[connection signal="pressed" from="NinePatchRect/BlockButton" to="." method="AddBlock" binds= [1, 0, false]]
[connection signal="pressed" from="NinePatchRect/FireBlockButton" to="." method="AddBlock" binds= [1, 1, false]]
[connection signal="pressed" from="NinePatchRect/IceBlockButton" to="." method="AddBlock" binds= [1, 2, false]]
[connection signal="pressed" from="NinePatchRect/IceFireButtonButton" to="." method="AddBlock" binds= [1, 3, false]]
[connection signal="pressed" from="NinePatchRect/CancelAttackButton" to="." method="PreventAttack" binds= [0, false]]
[connection signal="pressed" from="NinePatchRect/FearBannerButton" to="." method="PreventAttack" binds= [3, false]]
[connection signal="pressed" from="NinePatchRect/IllusionistsButton" to="." method="PreventAttack" binds= [1, true]]
[connection signal="pressed" from="NinePatchRect/TargetEnemyButton" to="." method="PreventAttack" binds= [1, false]]
[connection signal="pressed" from="NinePatchRect/ReduceAttackButton" to="." method="ReduceAttack" binds= [4, 1]]
[connection signal="pressed" from="NinePatchRect/Reduce2AttacksButton" to="." method="ReduceAttack" binds= [2, 2]]
[connection signal="pressed" from="NinePatchRect/MovementButton" to="." method="AddMovement" binds= [1]]
